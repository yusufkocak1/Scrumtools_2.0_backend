# Production Memory Optimized Configuration
spring.profiles.active=production

# JPA/Hibernate production optimizations
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.jdbc.batch_size=50
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true
spring.jpa.properties.hibernate.generate_statistics=false
spring.jpa.properties.hibernate.cache.use_second_level_cache=false
spring.jpa.properties.hibernate.cache.use_query_cache=false

# Connection pool - production optimized
spring.datasource.hikari.maximum-pool-size=15
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=600000
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.leak-detection-threshold=60000

# Jackson JSON - memory optimized
spring.jackson.default-property-inclusion=NON_EMPTY
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.serialization.fail-on-empty-beans=false

# Undertow server optimization
server.undertow.threads.io=4
server.undertow.threads.worker=16
server.undertow.buffer-size=1024
server.undertow.direct-buffers=true
server.undertow.max-http-post-size=1MB

# Security optimizations
spring.security.sessions.maximum=100
spring.security.sessions.max-sessions-prevents-login=false

# Actuator - minimal endpoints for production
management.endpoints.web.exposure.include=health,metrics,prometheus
management.endpoint.health.show-details=never
management.metrics.export.prometheus.enabled=true

# Logging - production level
logging.level.root=WARN
logging.level.com.kocak.scrumtoolsbackend=INFO
logging.level.org.springframework.web=WARN
logging.level.org.hibernate=WARN
